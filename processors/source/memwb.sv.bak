/*
  Eric Villasenor
  evillase@gmail.com

  this block is the coherence protocol
  and artibtration for ram
*/

// interface include
`include "pipeline_if.vh"

// memory types
`include "cpu_types_pkg.vh"

module memwb (
  pipeline_if.memwb memwbif
);
    // import types
    import cpu_types_pkg::*;

    always_ff @(posedge CLK or negedge nRST)
    begin
        if (!nRST)
        begin        
		memwbif.npcout <= 0;
		memwbif.newpcout <= 0;
		memwbif.outputPort_out <= 0;
		memwbif.dmemload_out <= 0;
		memwbif.Regdst_out <= 0;
	end
	else if (memwbif.ihit)
	begin   
		memwbif.npcout <= memwbif.npcin;
		memwbif.newpcout <= memwbif.newpcin;
		memwbif.outputPort_out <= memwbif.outputPort_in;
		memwbif.dmemload_out <= memwbif.dmemload_in;
		memwbif.Regdst_out <= memwbif.Regdst_in;
    	end
    end
endmodule
